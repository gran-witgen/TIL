### ハードディスク

ハードディスクの構造  

- ディスク(プラッタ)
- アクセスアーム
- 磁気ヘッド

- ディスク  
円盤。ここにデータを書き込んだり読み込んだりする  

- 磁気ヘッド  
ディスク上を走り、データの読み書きを行う。  

- アクセスアーム  
磁気ヘッドの根元についている。これを動かすことでディスク上の  
任意の点に移動する。  

- フォーマット
- セクタ
- トラック
- シリンダ

- フォーマット  
ディスクを最初に使う際にフォーマット->初期化し、データを書き込むうえでの領域を確保する。  

- セクタ  
作成された領域の最小範囲のこと  

- トラック  
セクタをディスク一週分集めた領域のこと  

データはセクタ単位で書き込まれる。  

- シリンダ  
トラックがたくさん集まったもの

セクタ、トラック、シリンダが分かると、そのハードディスクの容量が分かる。  

example

1セクタのバイト数:512  
1トラックのセクタ数:40  
1シリンダのトラック数:20  
シリンダ数:20

上記のようなハードディスクがあった場合

ハードディスクの容量 = 1セクタのバイト数 * 1トラックのセクタ数 * 1シリンダのトラック数 * シリンダ数
= 614400000バイト = 6144000kb ≒ 614mb

#### ファイルの保存方法

ファイルはクラスタという単位で保存する。  
クラスタ = 複数のセクタを1ブロックとみなしたもの。  


### データへのアクセス時間

データへアクセスする場合、以下のステップを踏むことになる。  

1. シーク(位置決め)  
2. サーチ(回転待ち)  
3. データ転送  

- シーク  
アクセスアームを動かして、アクセスしたいトラックの位置まで動く。  

- サーチ  
トラックまで移動した後に、アクセスしたいセクタを待つ  

- データ転送  
そのままじゃ


したがってアクセス時間 = シーク時間 + サーチ時間 + データ転送時間


example

回転速度:5000回転/分  
平均シーク時間:20ミリ秒  
1トラックあたりの記憶容量:15000バイト  

上記のハードディスクから6000バイトのデータを取り出す時間は?  

計算に使うシーク時間とサーチ時間はそれぞれ<b>平均値</b>。  
シーク時間はあるので、サーチ時間を求める。  

サーチ時間(の平均) = ディスクが1回転する時間 / 2  
ディスクが1回転する時間 = 1分 / 5000 -> 60秒 / 5000 -> 60000ミリ秒 / 5000 = 12ミリ秒  
したがってサーチ時間の平均時間は 12ミリ秒 / 2 = 6ミリ秒  

次にデータ転送時間を求める  

ディスクが1トラックのデータを転送するのはディスクが1回転する時間と同じ=サーチ時間  
ここから1ミリ秒当たりにどれくらいのデータを転送できるかわかる。  
1ミリ秒当たりに転送できるデータ量 = 15000 / 12 ≒ 1250バイト/ミリ秒  
したがって6000バイトのデータを読み出すには6000 / 1250 ≒ 5ミリ秒  

以上からアクセス時間は20ミリ秒 + 6ミリ秒 + 5ミリ秒 = 31ミリ秒


#### フラグメンテーション

ハードディスクにデータを書き込み削除を繰り返し行うと  
それまでは連続した領域に書き込まれていたデータが、バラバラな状態で書き込まれたり、あちこちに飛んだりする。  
このファイルが断片化した状態をフラグメンテーションという。  

フラグメンテーションが進んだ状態だと、データを呼び出す際に、時間がかかってしまう。  
この状況を打破するのがデフラグ。デフラグを行うことで、断片化したデータが整理される。  

### RAID

RAIDは複数のハードディスクを論理利用して、一台の仮想的なハードディスクを構築、運用する技術。  

特徴  

- RAID0(ストライピング)  
- RAID1(ミラーリング)  
- RAID5


- RAID0  
一つのデータを2台以上のディスクに分散して書き込む。  
ただし、一つでもデータが壊れると、全データ修復できない。  

- RAID1  
2台以上のディスクに対し、常に同じデータを書き込む。  
使える容量は半分になってしまうが、どれかが壊れても平気なため信頼性はある。  

- RAID5  
3台以上のディスクを利用し、データと同時にパリティと呼ばれる誤り訂正符号を混ぜて書き込む。  
パリティを使うことで、いずれかディスクが壊れてもパリティ情報を使ってデータを復元できる。

 
